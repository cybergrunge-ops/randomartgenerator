<html>
  <head>
    <script src="p5.min.js"></script>
    <script>let img1;
let img2;
let img3; 
let img4;
let img5; 
let img6;
let img7;
let a; let d; let b;
let filters; let r1; let r2; let randfilt1; let randfilt2;



let img
let keyed

function preload(){
img = loadImage("tinypic18/" + int(random(1,8966)) + ".jpg");
img2 = loadImage("tinypic18/" + int(random(1,8966)) + ".jpg");
img3 = loadImage("tinypic18/" + int(random(1,8966)) + ".jpg");
mask1 = loadImage("masks/mask" + int(random(1,34)) + ".png");
mask2 = loadImage("masks/mask" + int(random(1,34)) + ".png");
}

function setup() {
 img.resize(500,500);
 img2.resize(500,500);
 img3.resize(500,500);
 mask2.resize(500,500);
 mask1.resize(500,500);
  createCanvas(img.width, img.height);
  keyed = Key(img, [255, 255, 255], 233)
	thei=random(1,40);
}

function draw() {
noLoop();
  img2.mask(mask1);
  image(img2, 0, 0);
	for(i=0;i<300;i=i+thei){
  image(keyed, 0, i-200);}
blend(img3, 0, 0,500,500, 0, 0,500,500, DARKEST);
}

// helper for writing color to array
function writeColor(image, x, y, red, green, blue, alpha) {
  let index = (x + y * width) * 4;
  image.pixels[index] = red;
  image.pixels[index + 1] = green;
  image.pixels[index + 2] = blue;
  image.pixels[index + 3] = alpha;
}

function Key(image, color, level=70) {
  image.loadPixels();
  let out = new p5.Image(image.width, image.height)
  out.loadPixels();
  let keyVec = createVector(...color)
  for (y = 0; y < image.height; y++) {
    for (x = 0; x < image.width; x++) {
      let col = image.get(x, y)
      let colVec = createVector(...col)
      let d = colVec.dist(keyVec)
      let newCol = [...col]
      if(d < level){
        newCol[3] = 0
      }
      out.set(x, y, newCol)
    }
  }
  out.updatePixels()
  return out


}

	
</script>
  </head>
<title>Random Art Generator by Cybergrunge.net</title>
	
<style>
	a{text-decoration:none;border:4px outset gray;background-color:#ccc;color:black;font-size:12px}
	a:hover{border:4px inset gray;background:#aaa;font-size:12px}
	</style>

  <body style="background-color:#000;color:white;" >

<a style="padding:3px;" href="RandomArt.html">Version 1</a>
<a style="padding:3px;" href="RandomArt2.html">Hi-Contrast</a> 
<a style="padding:3px;" href="RandomArt3.html">V3:Echoes</a> 
<a style="padding:3px;" href="https://cybergrunge.net/shredder.html">V4:Shred+Chroma</a> <br><br>
  
<div style="position:absolute;width:400;top:675;">
<br>



	Please refresh the page to create a new piece of unique Cybergrunge Art. <br> Allow some time for image to generate properly !<br> 
feel free to use any results at your own risk.<br>
created by <a href="http://cybergrunge.net/" style="color:green">www.cybergrunge.net</a><br>
	made with Processing and javascript.  <br>
<br>current count of over 3,500 unique source images<br>
<i>new images added ~monthly</i><br><br>

<font style="background-color:yellow;color:black">NEW!</font><a href="RandomArt2.html" style="background-color:red;color:black">Alternate Version</a> <font style="color:cyan">- This version relies more heavily on the "threshold" filter and also uses more source images for noisier and more chaotic results.</font> <br><br>

<br><br>

If you use any images from this tool, please consider donating to CYBERGRUNGE.NET, it is greatly appreciated!<br>


</form><br><br>This tool is provided as-is for educational purposes. some images may be inappropriate. any copyrights are property of their respective owner(s), at least for the time being until intellectual property laws are completely repealed and all monopolist capitalist corporations are (peacefully) disolved.<br><br>
</div> 

</body>
</html>
